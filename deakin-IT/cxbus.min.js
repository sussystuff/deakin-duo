/*!
 * cxbus
 * @version: 2.0.6
 * @license: Genesys Telecom Labs
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cxbus",[],t):"object"==typeof exports?exports.cxbus=t():e.cxbus=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r;void 0===(r=function(){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var i=n(1).Promise,a=Ne(),s="color:red;font-weight:bold",u="color:white;background:#6495ed",c="color:#555;font-style:italic",l="color:#6495ed;font-weight:bold",f=!1,d=!1,m=[],p={},g={},b={},h={},y=[],v={},w={},D={},x={},I={},C=[],j=window.Genesys&&window.Genesys.q&&J(window.Genesys.q,L)?window.Genesys.q:[],N=!1,T=!0,P=!1,_="",E="",M="plugin.min.js",O={},S={},k=!0,A=!1,B="*",L="array",G=function(){},X={last:null,value:null};function F(e){if(J(e=function(e){var t={};for(var n in e)t[ne(n)]=e[n];return t}(e),"object")){if(J(e.debug,"boolean")&&(N=e.debug),J(e.queue,L)&&e.debug,J(e.async,"boolean")&&(k=e.async),J(e.log,"boolean")&&(T=e.log),J(e.logstore,"boolean")&&(P=e.logstore),J(e.pluginspath,"string")&&(_=ge(e.pluginspath)),J(e.modulespath,"string")&&(E=ge(e.modulespath)),J(e.pluginfilenameformat,"string")&&(M=e.pluginfilenameformat),J(e.pluginmap,"object")&&(O=e.pluginmap),J(e.pluginmap,"string"))try{O=JSON.parse(e.pluginmap)}catch(t){fe("%cInvalid plugin map JSON. Ignoring "+e.pluginmap,s)}if(J(e.modulemap,"object")&&(S=e.modulemap),J(e.modulemap,"string"))try{S=JSON.parse(e.modulemap)}catch(t){fe("%cInvalid module map JSON. Ignoring "+e.modulemap,s)}if(J(e.childDomain,"string")&&(B=e.childDomain),J(e.childmode,"boolean")&&1==e.childmode)A=e.childmode,d=!0,(window.opener||window.parent).postMessage({type:"CXBus.childCallout",registry:Object.keys(g),busID:a},"*");O=H(O),S=H(S),fe("%cGenesys configuration changed",u)}}function J(e,t){return t===L?!!Array.isArray(e):o(e)==t}function R(e,t,n){return le(e,(function(r,i){var c=ne(e),d=g[c];f&&!d&&void 0===t?Ae({type:"CXBus.remoteExecution",subType:"registerPlugin",busID:a,pluginName:e}).then((function(e){"pass"===e.resolution?R(e.pluginName,!0).then((function(e){r(e)})):"fail"===e.resolution&&R(e.pluginName,!1).then((function(e){i(e)}))})):!f||f&&!d&&!0===t?"string"!=o(e)||d?d&&i("%cCan't register plugin "+de(e)+" -- Name is already taken",s,l,s):(g[c]={name:e,namespace:e,interface:Z(e),events:{},commands:{},data:{},buffer:[],ready:!1,busID:n||a},h[c]={events:[],commands:[]},g[c].busID==a&&fe("%c New Plugin Registered:"+de(" "+e),u,l),function(e){var t=e.interface;t.registerCommand("COMMANDS",(function(t){ee(e,"Commands"),t.resolve()})),t.registerCommand("EVENTS",(function(t){ee(e,"Events"),t.resolve()})),t.registerCommand("LOAD",(function(e){e.resolve()}))}(g[c]),g[c].interface.initData=w[c]||{},r(g[c].interface),w[c]&&delete w[c]):f&&!1===t&&i("%cCan't register plugin "+de(e)+" -- Name is already taken",s,l,s)}))}function U(e){return"function"==o(e)&&(y.push(e),!0)}function q(e){e&&!e.mID&&(e.mID=Ne());for(var t=0;t<y.length;t++)y[t](e)}function H(e){var t={};for(var n in e)t[ne(n)]=e[n];return t}function Y(e,t){var n=ne(e);return le(e,(function(r,i){if(function(e){for(var t in e.split(".").length>1&&(e=e.split(".")[0]),g)if(ne(t)==ne(e))return!0;return!1}(e)||D[ne(e)])fe("%cCan't load plugin ("+de(e)+") -- This plugin is already loaded or an unexpected error occurred.",s,l,s),i();else{var a=M.replace("plugin",n),c=O[n],f=function(t){!function(e){D[ne(e)]=!0}(e),r(t)},d=function(){i("Could not load plugin file: "+a)};w[n]=t||{},fe("%cLoading plugin: "+(c||a),l),"string"==o(c)&&""!==c?c.match(".js$")?$(c,f,d):(fe("%cError: ("+c+") is not recognized as a javascript file. Please map plugins to javascript files only.",s),i()):!1===c?(fe("%cNotice: "+a+" was prevented from loading by the current plugin mapping configuration.",u),i()):$(_+a,f,d)}}))}function z(e){return le("loadFile",(function(t,n){if(function(e){return x[e]}(e))fe("%cCan't load file ("+e+") -- This file was already loaded",s,l,s),n();else{fe("%cLoading file: "+e,l),$(e,(function(n){!function(e){x[e]=!0}(e),t(n)}),(function(){n("Could not load file: "+e)}))}}))}function Q(e,t){return le("loadJSON",(function(t,n){var r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET",e,!0),r.onreadystatechange=function(){4==r.readyState&&"200"==r.status?r.responseText&&t(r.responseText):"200"!=r.status&&0!=r.status&&n("loadJSON failed with status code: "+r.status)},r.send(null)}))}function V(e){var t=ne(e);return le("loadModule",(function(e,n){if(t&&I[t])setTimeout((function(){e(I[t])}),0);else{var r="module.mod.js".replace("module",t),i=S[t],a=""!==E?E:_,c=function(n){e(I[t])},l=function(){n("Could not load module: "+t)};"string"==o(i)&&""!==i?i.match(".js$")?$(i,c,l):(fe("%cError: ("+i+") is not recognized as a javascript file. Please map modules to javascript files only.",s),n()):!1===i?(fe("%cNotice: "+r+" was prevented from loading by the current module mapping configuration.",u),n()):$(a+r,c,l)}}))}function W(e,t){var n=ne(e);return!I[n]&&(I[n]=t,!0)}function $(e,t,n){if(!e)return!1;var r=document.createElement("script");return r.type="text/javascript",r.onload=t,r.onerror=n,r.src=e,r.charset="UTF-8",document.head.appendChild(r),!0}function K(e,t){g[ne(e)].ready=!0,function(e){var t=ne(e),n=g[t].buffer||[],r=0;for(r=0;r<n.length;r++)!function(e){var t=oe(e.command);fe(de(e.commander)+" called the command: "+de(e.command),l,c,l),t&&me((function(){t(e)}))}(n[r]);g[t].buffer=[]}(e),ae(e,"ready",t||{},!0)}function Z(e){var t=function(){try{N&&console.log&&console.log.apply(this,arguments)}catch(e){}};return t.info=function(){try{N&&console.info&&console.info.apply(this,arguments)}catch(e){}},t.warn=function(){try{N&&console.warn&&console.warn.apply(this,arguments)}catch(e){}},t.error=function(){try{N&&console.error&&console.error.apply(this,arguments)}catch(e){}},{publish:function(t,n){return ae(e,t,n)},publishDirect:function(t,n){return ae(e,t,n,!1,!0)},republish:function(t,n){return ae(e,t,n,!0)},subscribe:function(t,n){return ue(e,t,n)},unsubscribe:function(t){return function(e,t){var n=re(e),r=ne(t);if(n&&b[r]&&b[r].subscribers){for(var o=[],i=0;i<b[r].subscribers.length;i++)b[r].subscribers[i].subscriber!=e&&o.push(b[r].subscribers[i]);return o.length>0?b[r].subscribers=o:delete b[ne(t)],fe(de(e)+" unsubscribed from "+de(t),l,c,l),!0}return!1}(e,t)},command:function(t,n){return ce({commander:e,command:t,data:n})},before:function(e,t){return r=t,!!te(n=e)&&(v[n]||(v[n]=[]),v[n].push(r),!0);var n,r},registerCommand:function(t,n){return ie(e,t,n)},registerEvents:function(t){!function(e,t){var n=re(e);J(t=t||[],"string")&&(t=[t]);if(n&&t.length>0){for(var r=0;r<t.length;r++)n.events[t[r]]||(n.events[t[r]]=!0,h[ne(e)].events.push(t[r]));return fe(de(e)+" registered the events: %c"+t.join(", "),l,c,l),!0}}(e,t)},namespace:function(){return e+""},subscribers:function(){return function(e){var t={};for(var n in b)if(n.match(ne(e))){t[n]||(t[n]=[]);for(var r=0;r<b[n].subscribers.length;r++)t[n].push(b[n].subscribers[r].subscriber)}return t}(e)},data:function(t,n){return function(e,t,n){return function(e,t,n){var r=ne(e);if(null!=n){var i;g[r].data[t]?i=g[r].data[t].value:g[r].data[t]=X;o(i);var a=o(n),s={};s.last=i,s.value=n,s.time=(new Date).getTime();var u="data."+t;i!=n&&(ae(e,"data",g[r].data),ae(e,u,s),ae(e,"string"==a?u+":'"+s.value+"'":u+":"+s.value,s,!1,!0)),g[r].data[t]=s}}(e,t,n),function(e,t){var n=ne(e);if(g[n].data[t])return g[n].data[t].value;if(e&&!t&&g[n])return g[n].data||{};var r=te(t),o=g[ne(r)];if(t=t.replace(r+".",""),o&&o.data[t])return o.data[t].value;return}(e,t)}(e,t,n)},registry:function(){return h},initData:{},log:t,ready:function(){return K(e)}}}function ee(e,t){for(var n in fe("%cList of "+t+" for: "+de(e.namespace),u,l),e[ne(t)])fe("%c"+n,u)}function te(e){return e.split(".")[0]}function ne(e){return"string"==typeof e?e.toLowerCase():e}function re(e){return g[ne(e)]||g[te(ne(e))]||!1}function oe(e){var t=ne(e).split(".")||[],n=!1;return 2==t.length&&(n=re(t[0]))&&n.commands[t[1]]||!1}function ie(e,t,n){var r=ne(t),o=re(e);return!!o&&(o.commands[r]||h[ne(e)].commands.push(t),o.commands[r]=n,o.busID==a&&fe(de(e)+" registered the command: "+de(t),l,c,l),f&&Pe({id:a,childID:a,busID:a,type:"CXBus.remoteExecution",subType:"registerCommand",namespace:e,commandName:t}),!0)}function ae(e,t,n,r,o,i){var s=ne(pe([e,t])),u=de(e)+" published: "+de(t);if(n=n||{},!0===r&&(b[s]?(b[s].republish=!0,b[s].data=n):b[s]={subscribers:[],republish:!0,data:n}),o||i||fe(u,l,c,l),Be("publish",s,b[s]),b[s]){o&&!i&&fe(u,l,c,l);for(var f=b[s].subscribers,d={time:(new Date).getTime(),publisher:e,event:s,data:n||{}},m=0;m<f.length;m++)me(f[m].callback,d)}return i||_e("publish",{busID:a,childID:a,event:s,eventName:t,publisher:e,republish:r,direct:o,data:n}),q({type:"publish",time:(new Date).getTime(),source:e,target:s,data:n||{}}),!0}function se(e,t,n,r){fe(de(t)+" republished: "+de(e),l,c,l),me(n,{time:(new Date).getTime(),publisher:t,event:e,data:r}),q({type:"publish",time:(new Date).getTime(),source:t,target:e,data:r||{}})}function ue(e,t,n){var r=re(e),o=re(t),i=ne(t);return!(!n||!r)&&(b[i]||(b[i]={subscribers:[],republish:!1}),b[i].subscribers.push({subscriber:e,callback:n}),fe(de(e)+" subscribed to "+de(t),l,c,l),!0===b[i].republish&&o&&se(t,o.namespace,n,b[i].data||{}),_e("subscribe",{busID:a,childID:a,eventName:t,subscriber:e}),t)}function ce(e){var t=e.commander,n=e.command,r=(ne(n),e.data),i=e.resolveBuff,u=e.rejectBuff,d=e.buffered;r=r||{},n&&1===n.split(".").length&&(n=pe([t,n])),d||(r=function(e,t){for(var n=v[e]||[],r=0;r<n.length;r++)"object"==o(t)&&!1!==t&&null!=t&&(t=n[r](t));return t}(n,r));var m=oe(n),p=te(n),b=g[ne(p)];if(q({type:"command",time:(new Date).getTime(),source:t,target:n,data:r||{}}),f&&!b)return Ae({type:"CXBus.remoteExecution",subType:"command",busID:a,pluginName:p,commandName:n,commander:t,data:r});if(!f&&b&&b.busID!=a)return e.message?(e.message.targetID=b.busID,Ae(e.message)):Ae({type:"CXBus.remoteExecution",subType:"command",busID:a,pluginName:p,commandName:n,commander:t,data:r,targetID:b.busID});if(b&&b.busID==a){var h=le(n,(function(f,d){var h={time:(new Date).getTime(),commander:t,command:n,resolve:i||f,reject:u||d,data:r||{}};"object"==o(r)&&!1!==r&&null!=r?b&&b.busID==a&&(fe(de(t)+" called the command: "+de(n),l,c,l),b.ready||p==t?m?m(h):(e.message&&(e.message.resolution="fail",e.message.resolutionData="Command does not exist"),h.reject("Command does not exist")):b.ready||(fe("%c"+de(p)+" is loading and/or has not yet called its ready() method. Your command call ("+n+") has been buffered and will be executed once the plugin has loaded and/or called its ready() method.",s,s,s),function(e,t){g[ne(e)].buffer.push(t)}(p,h))):(e.message.resolution="fail",e.message.resolutionData="Command was cancelled by a 'before' function.",h.reject("Command was cancelled by a 'before' function.")),e.message&&"fail"==e.message.resolution&&Ae(e.message)}));return e.message&&h.then((function(t){e.message.resolution="pass",e.message.resolutionData=t,Ae(e.message)})).catch((function(t){e.message.resolution="fail",e.message.resolutionData=t,Ae(e.message)})),h}return f||b?void 0:le(n,(function(o,i){fe("%c'"+p+"' plugin not currently registered. Attempting to load plugin from configured path ("+_+").",l),Y(p).then((function(){ce({commander:t,command:n,data:r,resolveBuff:o,rejectBuff:i,buffered:!0})}),(function(){e.message.resolution="fail",e.message.resolutionData="Could not load plugin file in given location. Check your plugins path option.",i("Could not load plugin file in given location. Check your plugins path option.")}))}))}function le(e,t){var n=new i(t);return n.catch((function(t){fe("%cError ("+de(e)+"): ",s,s,s),console.error&&console.error(t)})),n}function fe(e,t,n,r,i,a){try{T&&(P&&C.push(e+""),N&&console&&console.log&&"string"==o(e)&&("%c"==e.substr(e.length-2,2)&&(e=e.substr(0,e.length-2)),console.log.apply(this,arguments)))}catch(e){Be("logging error!")}}function de(e){return"%c"+e+"%c"}function me(e,t,n,r){k||r?setTimeout((function(){e(t)}),n||0):e(t)}function pe(e){return e.join(".")}function ge(e){return e&&"/"!=e[e.length-1]?e+"/":e}function be(){if(d)j.push(arguments);else{var e=arguments,t=e[0]||"";if("registerPlugin"==t)R(e[1]).then(e[2]||G,e[3]||G);else if("command"==t)ce({commander:"Genesys",command:e[1],data:e[2]||{}}).then(e[3]||G,e[4]||G);else if("subscribe"==t&&"string"==o(e[1])&&"function"==o(e[2]))ue("Genesys",e[1],e[2]);else if("monitor"==t&&"function"==o(e[1]))U(e[1]);else if("registerChild"==t)xe(e[1]);else if("registerModule"==t)W(e[1],e[2]);else if("executeQueue"==t)ye();else if("loadPlugin"==t)Y(e[1],e[2]).then(e[3]||G,e[4]||G);else if("loadFile"==t)z(e[1]).then(e[2]||G,e[3]||G);else if("loadModule"==t)V(e[1]).then(e[2]||G,e[3]||G);else if("loadJSON"==t)Q(e[1]).then(e[2]||G,e[3]||G);else{if("configure"!=t)return!1;if(!e[1])return he();F(e[1]||{})}}return!0}function he(){return fe("CXBus Configuration\n----------------------------\nDEBUG: \t\t\t\t\t"+N+"\nPLUGINS_PATH: \t\t\t"+(_||'""')+"\nMODULES_PATH: \t\t\t"+(E||'""')+"\nPLUGIN_FILENAME_FORMAT: "+M+"\nMODULE_FILENAME_FORMAT: module.mod.js\nPLUGIN_MAP: \t\t\t"+JSON.stringify(O)+"\nMODULE_MAP: \t\t\t"+JSON.stringify(S)+"\nASYNC: \t\t\t\t\t"+k+"\nCHILD_MODE: \t\t\t"+A+"\nCHILD_DOMAIN: \t\t\t"+B+"\nPARENT_DOMAIN: \t\t\t*"),{debug:N,pluginsPath:_,modulesPath:E,pluginFilenameFormat:M,moduleFilenameFormat:"module.mod.js",pluginMap:O,moduleMap:S,async:k,childMode:A,childDomain:B,parentDomain:"*"}}function ye(e){if(j){fe("%cExecuting "+j.length+" items from the queue...",u);for(var t=0;t<j.length;t++)be.apply(this,j[t])}}if(window.Genesys)for(var ve=Object.keys(window.Genesys),we=0;we<ve.length;we++)be[ve[we]]=window.Genesys[ve[we]];window.Genesys=be,R("Genesys"),"function"==o(n(3))&&n(4)&&(void 0===(r=function(){return window.Genesys}.apply(t,[]))||(e.exports=r));var De={};function xe(e){return!!e&&(e.contentWindow&&(e=e.contentWindow),De[id]={id:id,busID:void 0,intvl:setInterval((function(){Ie(e,id)}),500),callAttempts:0,registered:!1,window:e,registry:[]},Ie(e,id),!0)}function Ie(e,t){e.postMessage({type:"CXBus.parentCallout",childID:t,busID:a},B),De[t].callAttempts++}function Ce(e,t,n){De[t]&&!De[t].registered?(clearInterval(De[t].intvl),De[t].registered=(new Date).getTime(),De[t].registry=n,De[t].busID=busID):(De[t]={id:t,busID:t,intvl:!1,callAttempts:0,registered:(new Date).getTime(),window:e,registry:n},e.postMessage({type:"CXBus.parentCallback",busID:t},B))}function je(e,t,n){d=!1,f=e,ye()}function Ne(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function Te(e,t){De[e]&&(t=t||{},De[e].window.postMessage(t,B))}function Pe(e){f&&f.postMessage(e,"*")}function _e(e,t){if(Be("broadcast",e,t),(t=t||{}).subType=e,t.type="CXBus.broadcast",f)Pe(t);else for(var n in De)Te(n,t)}var Ee,Me,Oe=document.getElementById("genesys-cxbus"),Se={},ke={src:0,charset:0,id:0,type:0,queue:0,pluginmap:0,modulemap:0};if(Oe){for(we=0;we<Oe.attributes.length;we++)Ee=ne(Oe.attributes[we].nodeName),"true"===(Me=Oe.attributes[we].nodeValue)&&(Me=!0),"false"===Me&&(Me=!1),ke[Ee]||(Se[Ee]=Me);F(Se)}function Ae(e){var t;if(e.id)t=e.id;else{for(t=Ne();p[t];)t=Ne();e.id=t}return le("remoteExecution",(function(n,r){p[t]={success:n,fail:r},!f&&e.resolution?(Be("--\x3e to origin"),Te(e.busID,e)):!f&&e.targetID?(Be("--\x3e to target child"),Te(e.targetID,e)):e.id!=a&&(Be("--\x3e to parent"),Pe(e))}))}function Be(){var e=Array.prototype.slice.call(arguments);e.unshift("["+window.name+"]")}window.addEventListener("message",(function(e){m.push(e),function(){for(;m.length>0;){var e=m.shift(),t=e.data,n=p[t.id];switch(t.type){case"CXBus.parentCallout":A&&je(e.source,t.busID,t.parentRegistry);break;case"CXBus.childCallout":A||Ce(e.source,t.busID,t.registry);break;case"CXBus.parentCallback":A&&je(e.source,t.busID,t.parentRegistry);break;case"CXBus.childCallback":A||Ce(e.source,t.busID,t.registry);break;case"CXBus.broadcast":f||_e(t);var r=ne(t.eventName),o=b[r]||!1;switch(t.subType){case"subscribe":if(void 0===t.eventData&&o&&!0===o.republish){var i=re(t.eventName);t.eventNamespace=i?i.namespace:"",t.eventData=o.data||{},t.subType="republish",Te(t.busID,t)}break;case"publish":ae(t.publisher,t.eventName,t.data,t.republish,t.direct,!0);break;case"republish":for(var s=null,u=0;u<o.subscribers.length;u++)o.subscribers[u].subscriber==t.subscriber&&(s=o.subscribers[u].callback);s&&se(t.eventName,t.eventNamespace,s,t.eventData||{})}break;case"CXBus.remoteExecution":switch(t.subType){case"registerPlugin":f||(re(t.pluginName)?(t.resolution="fail",Te(t.busID,t)):(t.resolution="pass",Te(t.busID,t),R(t.pluginName,!0,t.busID))),n&&t.resolution&&("pass"==t.resolution?n.success(t):"fail"==t.resolution&&n.fail(t));break;case"registerCommand":f||ie(t.namespace,t.commandName,G);break;case"command":var c=p[t.id],l=te(t.commandName),d=g[ne(l)];if(t.resolution)t.resolution&&c&&("pass"==t.resolution?c.success(t.resolutionData):"fail"==t.resolution&&c.fail(t.resolutionData),f||t.busID==a||Ae(t),delete p[t.id]);else if(!f&&d&&d.busID&&d.busID!=a)t.targetID=d.busID,Ae(t),q({type:"command",time:(new Date).getTime(),source:t.commander,target:t.commandName,data:t.data||{}});else if(d&&d.busID&&d.busID==a)ce({commander:t.commander,command:t.commandName,data:t.data,message:t});else if(!f&&!d)return t.resolution="fail",t.resolutionData="Plugin does not exist and no plugins path is configured",Ae(t)}}}}()}),!1),window.reg=function(){return{busID:a,oParentBus:f,bPendingParent:d,aMessageQueue:m,oChildRegistry:De,oPlugins:g,oSubscriptions:b,oRegistry:h,oBefore:v,oLoadedPlugins:D,oLoadedFiles:x,oLoadedModules:I}}}()}.apply(t,[]))||(e.exports=r)},function(e,t,n){(function(r){var o;!function(r){var i=r.Promise,a=i&&"resolve"in i&&"reject"in i&&"all"in i&&"race"in i&&function(){var e;return new i((function(t){e=t})),"function"==typeof e}();t?(t.Promise=a?i:x,t.Polyfill=x):void 0===(o=function(){return a?i:x}.call(t,n,t,e))||(e.exports=o);var s=function(){};function u(e){return"[object Array]"===Object.prototype.toString.call(e)}var c,l="undefined"!=typeof setImmediate?setImmediate:setTimeout,f=[];function d(){for(var e=0;e<f.length;e++)f[e][0](f[e][1]);f=[],c=!1}function m(e,t){f.push([e,t]),c||(c=!0,l(d,0))}function p(e){var t=e.owner,n=t.state_,r=t.data_,o=e[n],i=e.then;if("function"==typeof o){n="fulfilled";try{r=o(r)}catch(e){y(i,e)}}g(i,r)||("fulfilled"===n&&b(i,r),"rejected"===n&&y(i,r))}function g(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,(function(r){n||(n=!0,t!==r?b(e,r):h(e,r))}),(function(t){n||(n=!0,y(e,t))})),!0}}catch(t){return n||y(e,t),!0}return!1}function b(e,t){e!==t&&g(e,t)||h(e,t)}function h(e,t){"pending"===e.state_&&(e.state_="sealed",e.data_=t,m(w,e))}function y(e,t){"pending"===e.state_&&(e.state_="sealed",e.data_=t,m(D,e))}function v(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)p(t[n])}function w(e){e.state_="fulfilled",v(e)}function D(e){e.state_="rejected",v(e)}function x(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof x==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(e,t){function n(e){y(t,e)}try{e((function(e){b(t,e)}),n)}catch(e){n(e)}}(e,this)}x.prototype={constructor:x,state_:"pending",then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(s),fulfilled:e,rejected:t};return"fulfilled"===this.state_||"rejected"===this.state_?m(p,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},x.all=function(e){if(!u(e))throw new TypeError("You must pass an array to Promise.all().");return new this((function(t,n){var r=[],o=0;function i(e){return o++,function(n){r[e]=n,--o||t(r)}}for(var a,s=0;s<e.length;s++)(a=e[s])&&"function"==typeof a.then?a.then(i(s),n):r[s]=a;o||t(r)}))},x.race=function(e){if(!u(e))throw new TypeError("You must pass an array to Promise.race().");return new this((function(t,n){for(var r,o=0;o<e.length;o++)(r=e[o])&&"function"==typeof r.then?r.then(t,n):t(r)}))},x.resolve=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this((function(t){t(e)}))},x.reject=function(e){return new this((function(t,n){n(e)}))}}("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this)}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(this,{})}])}));